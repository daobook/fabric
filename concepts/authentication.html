
<!DOCTYPE html>

<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Authentication &#8212; Fabric  文档</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Configuration" href="configuration.html" />
    <link rel="prev" title="Getting started" href="../getting-started.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="authentication">
<h1>Authentication<a class="headerlink" href="#authentication" title="Permalink to this heading">¶</a></h1>
<p>Even in the ‘vanilla’ OpenSSH client, authenticating to remote servers involves
multiple potential sources for secrets and configuration; Fabric not only
supports most of those, but has more of its own. This document outlines the
available methods for setting authentication secrets.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Since Fabric itself tries not to reinvent too much Paramiko functionality,
most of the time configuring authentication values boils down to “how to
set keyword argument values for <code class="xref py py-obj docutils literal notranslate"><span class="pre">SSHClient.connect</span></code>”, which in turn means to set values
inside either the <code class="docutils literal notranslate"><span class="pre">connect_kwargs</span></code> <a class="reference internal" href="configuration.html"><span class="doc">config</span></a> subtree, or the <code class="docutils literal notranslate"><span class="pre">connect_kwargs</span></code> keyword
argument of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code>.</p>
</div>
<section id="private-key-files">
<h2>Private key files<a class="headerlink" href="#private-key-files" title="Permalink to this heading">¶</a></h2>
<p>Private keys stored on-disk are probably the most common auth mechanism for
SSH. Fabric offers multiple methods of configuring which paths to use, most of
which end up merged into one list of paths handed to
<code class="docutils literal notranslate"><span class="pre">SSHClient.connect(key_filename=[...])</span></code>, in the following order:</p>
<ul class="simple">
<li><p>If a <code class="docutils literal notranslate"><span class="pre">key_filename</span></code> key exists in the <code class="docutils literal notranslate"><span class="pre">connect_kwargs</span></code> argument to
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code>, they come first in the list. (This is basically the “runtime”
option for non-CLI users.)</p></li>
<li><p>The config setting <code class="docutils literal notranslate"><span class="pre">connect_kwargs.key_filename</span></code> can be set in a number of
ways (as per the <a class="reference internal" href="configuration.html"><span class="doc">config docs</span></a>) including via
the <a class="reference internal" href="../cli.html#cmdoption-i"><code class="xref std std-option docutils literal notranslate"><span class="pre">--identity</span></code></a> CLI flag (which sets the <code class="docutils literal notranslate"><span class="pre">overrides</span></code> level of the
config; so when this flag is used, key filename values from other config
sources will be overridden.) This value comes next in the overall list.</p></li>
<li><p>Using an <a class="reference internal" href="configuration.html#ssh-config"><span class="std std-ref">ssh_config</span></a> file with <code class="docutils literal notranslate"><span class="pre">IdentityFile</span></code>
directives lets you share configuration with other SSH clients; such values
come last.</p></li>
</ul>
<section id="encryption-passphrases">
<h3>Encryption passphrases<a class="headerlink" href="#encryption-passphrases" title="Permalink to this heading">¶</a></h3>
<p>If your private key file is protected via a passphrase, it can be supplied in a
handful of ways:</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">connect_kwargs.passphrase</span></code> config option is the most direct way to
supply a passphrase to be used automatically.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Using actual on-disk config files for this type of material isn’t always
wise, but recall that the <a class="reference internal" href="configuration.html"><span class="doc">configuration system</span></a> is capable of loading data from other sources,
such as your shell environment or even arbitrary remote databases.</p>
</div>
</li>
<li><p>If you prefer to enter the passphrase manually at runtime, you may use the
command-line option <a class="reference internal" href="../cli.html#cmdoption-prompt-for-passphrase"><code class="xref std std-option docutils literal notranslate"><span class="pre">--prompt-for-passphrase</span></code></a>, which will cause
Fabric to interactively prompt the user at the start of the process, and
store the entered value in <code class="docutils literal notranslate"><span class="pre">connect_kwargs.passphrase</span></code> (at the ‘overrides’
level.)</p></li>
</ul>
</section>
</section>
<section id="private-key-objects">
<h2>Private key objects<a class="headerlink" href="#private-key-objects" title="Permalink to this heading">¶</a></h2>
<p>Instantiate your own <code class="xref py py-obj docutils literal notranslate"><span class="pre">PKey</span></code> object (see its subclasses’
API docs for details) and place it into <code class="docutils literal notranslate"><span class="pre">connect_kwargs.pkey</span></code>. That’s it!
You’ll be responsible for any handling of passphrases, if the key material
you’re loading (these classes can load from file paths or strings) is
encrypted.</p>
</section>
<section id="ssh-agents">
<h2>SSH agents<a class="headerlink" href="#ssh-agents" title="Permalink to this heading">¶</a></h2>
<p>By default (similar to how OpenSSH behaves) Paramiko will attempt to connect to
a running SSH agent (Unix style, e.g. a live <code class="docutils literal notranslate"><span class="pre">SSH_AUTH_SOCK</span></code>, or Pageant if
one is on Windows). This can be disabled by setting
<code class="docutils literal notranslate"><span class="pre">connect_kwargs.allow_agent</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</section>
<section id="passwords">
<h2>Passwords<a class="headerlink" href="#passwords" title="Permalink to this heading">¶</a></h2>
<p>Password authentication is relatively straightforward:</p>
<ul class="simple">
<li><p>You can configure it via <code class="docutils literal notranslate"><span class="pre">connect_kwargs.password</span></code> directly.</p></li>
<li><p>If you want to be prompted for it at the start of a session, specify
<a class="reference internal" href="../cli.html#cmdoption-prompt-for-login-password"><code class="xref std std-option docutils literal notranslate"><span class="pre">--prompt-for-login-password</span></code></a>.</p></li>
</ul>
</section>
<section id="gssapi">
<h2>GSSAPI<a class="headerlink" href="#gssapi" title="Permalink to this heading">¶</a></h2>
<p>Fabric doesn’t provide any extra GSSAPI support on top of Paramiko’s existing
connect-time parameters (see e.g. <code class="docutils literal notranslate"><span class="pre">gss_kex</span></code>/<code class="docutils literal notranslate"><span class="pre">gss_auth</span></code>/<code class="docutils literal notranslate"><span class="pre">gss_host</span></code>/etc in
<code class="xref py py-obj docutils literal notranslate"><span class="pre">SSHClient.connect</span></code>) and the modules
implementing the functionality itself (such as <code class="xref py py-obj docutils literal notranslate"><span class="pre">paramiko.ssh_gss</span></code>.) Thus, as
usual, you should be looking to modify the <code class="docutils literal notranslate"><span class="pre">connect_kwargs</span></code> configuration
tree.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.png" alt="Logo"/>
    
    <h1 class="logo logo-name">Fabric</h1>
    
  </a>
</p>



<p class="blurb">Pythonic remote execution</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=fabric&repo=fabric&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>导航</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#private-key-files">Private key files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#private-key-objects">Private key objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ssh-agents">SSH agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="#passwords">Passwords</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gssapi">GSSAPI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command-line interface</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/config.html"><code class="docutils literal notranslate"><span class="pre">config</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/connection.html"><code class="docutils literal notranslate"><span class="pre">connection</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/exceptions.html"><code class="docutils literal notranslate"><span class="pre">exceptions</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/executor.html"><code class="docutils literal notranslate"><span class="pre">executor</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/group.html"><code class="docutils literal notranslate"><span class="pre">group</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/runners.html"><code class="docutils literal notranslate"><span class="pre">runners</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/tasks.html"><code class="docutils literal notranslate"><span class="pre">tasks</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/testing.html"><code class="docutils literal notranslate"><span class="pre">testing</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/transfer.html"><code class="docutils literal notranslate"><span class="pre">transfer</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/tunnels.html"><code class="docutils literal notranslate"><span class="pre">tunnels</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/util.html"><code class="docutils literal notranslate"><span class="pre">util</span></code></a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://www.fabfile.org">Main website</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>


<h3 class="donation">Donate/support</h3>







<p>
Professionally-supported Fabric is available with the
<a href="https://tidelift.com/subscription/pkg/pypi-fabric?utm_source=pypi-fabric&utm_medium=referral&utm_campaign=docs">Tidelift Subscription</a>.
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022 Jeff Forcier.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/concepts/authentication.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-18486793-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>