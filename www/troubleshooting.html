
<!DOCTYPE html>

<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Troubleshooting &#8212; Fabric  文档</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/translations.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="Development roadmap" href="roadmap.html" />
    <link rel="prev" title="Development" href="development.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="troubleshooting">
<h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this heading">¶</a></h1>
<p>Stuck? Having a problem? Here are the steps to try before you submit a bug
report.</p>
<ul>
<li><p><strong>Make sure you’re on the latest version.</strong> If you’re not on the most recent
version, your problem may have been solved already! Upgrading is always the
best first step.</p></li>
<li><p><strong>Try older versions.</strong> If you’re already <em>on</em> the latest Fabric, try rolling
back a few minor versions (e.g. if on 2.3, try Fabric 2.2 or 2.1) and see if
the problem goes away. This will help the devs narrow down when the problem
first arose in the commit log.</p></li>
<li><p><strong>Try switching up your Paramiko.</strong> Fabric relies heavily on the Paramiko
library for its SSH functionality, so try applying the above two steps to
your Paramiko install as well.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Fabric versions sometimes have different Paramiko dependencies - so to
try older Paramikos you may need to downgrade Fabric as well.</p>
</div>
</li>
<li><p><strong>Make sure Fabric is really the problem.</strong> If your problem is in the
behavior or output of a remote command, try recreating it without Fabric
involved:</p>
<blockquote>
<div><ul>
<li><p>Find out the exact command Fabric is executing on your behalf:</p>
<blockquote>
<div><ul class="simple">
<li><p>In 2.x and up, activate command echoing via the <code class="docutils literal notranslate"><span class="pre">echo=True</span></code> keyword
argument, the <code class="docutils literal notranslate"><span class="pre">run.echo</span></code> config setting, or the <code class="docutils literal notranslate"><span class="pre">-e</span></code> CLI option.</p></li>
<li><p>In 1.x, run Fabric with <code class="docutils literal notranslate"><span class="pre">--show=debug</span></code> and look for <code class="docutils literal notranslate"><span class="pre">run:</span></code> or
<code class="docutils literal notranslate"><span class="pre">sudo:</span></code> lines.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Execute the command in an interactive remote shell first, to make sure it
works for a regular human; this will catch issues such as errors in
command construction.</p></li>
<li><p>If that doesn’t find the issue, run the command over a non-shell SSH
session, e.g. <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">yourserver</span> <span class="pre">&quot;your</span> <span class="pre">command&quot;</span></code>. Depending on your
settings and Fabric version, you may want to use <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">-T</span></code> (disable PTY)
or <code class="docutils literal notranslate"><span class="pre">-t</span></code> (enable PTY) to most closely match how Fabric is executing the
command.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>Enable Paramiko-level debug logging.</strong> If your issue is in the lower level
Paramiko library, it can help us to see the debug output Paramiko prints. At
top level in your fabfile (or in an appropriate module, if not using a
fabfile), add the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</pre></div>
</div>
<p>This should start printing Paramiko’s debug statements to your standard error
stream. (Feel free to add more logging kwargs to <code class="docutils literal notranslate"><span class="pre">basicConfig()</span></code> such as
<code class="docutils literal notranslate"><span class="pre">filename='/path/to/a/file'</span></code> if you like.)</p>
<p>Then submit this info to anybody helping you on IRC or in your bug report.</p>
</li>
</ul>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo.png" alt="Logo"/>
    
    <h1 class="logo logo-name">Fabric</h1>
    
  </a>
</p>



<p class="blurb">Pythonic remote execution</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=fabric&repo=fabric&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>导航</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog-v1.html">Changelog (1.x)</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing-1.x.html">Installing (1.x)</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading.html">Upgrading from 1.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://docs.fabfile.org">API Docs</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>


<h3 class="donation">Donate/support</h3>







<p>
Professionally-supported Fabric is available with the
<a href="https://tidelift.com/subscription/pkg/pypi-fabric?utm_source=pypi-fabric&utm_medium=referral&utm_campaign=docs">Tidelift Subscription</a>.
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022 Jeff Forcier.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/troubleshooting.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-18486793-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>